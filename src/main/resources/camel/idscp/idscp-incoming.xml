<routes xmlns="http://camel.apache.org/schema/spring">

    <route id="idscp-server">
<!--        <from uri="timer://contractRequest?delay=10000&amp;repeatCount=1" />-->
<!--        <log message="test"/>-->

        <from uri="idscp2server://0.0.0.0:29292?sslContextParameters=#serverSslContext&amp;useIdsMessages=true"/>
        <log message="${body}"/>
        <process ref="TypeExtractionProcessor"/>
        <process ref="IncomingIdscpMessageParser"/>
        <choice>
            <when>
                <simple>${exchangeProperty.ids-type} == 'DescriptionRequestMessage'</simple>
                <to uri="direct:descriptionRequestHandler"/>
            </when>
            <when>
                <simple>${exchangeProperty.ids-type} == 'ContractRequestMessage'</simple>
                <to uri="direct:contractRequestHandler"/>
            </when>
            <when>
                <simple>${exchangeProperty.ids-type} == 'ContractAgreementMessage'</simple>
                <to uri="direct:contractAgreementHandler"/>
            </when>
            <when>
                <simple>${exchangeProperty.ids-type} == 'ArtifactRequestMessage'</simple>
                <to uri="direct:artifactRequestHandler"/>
            </when>
            <when>
                <simple>${exchangeProperty.ids-type} == 'NotificationMessage'</simple>
                <to uri="direct:notificationMsgHandler"/>
            </when>
            <when>
                <simple>${exchangeProperty.ids-type} == 'ResourceUpdateMessage'</simple>
                <to uri="direct:resourceUpdateHandler"/>
            </when>
        </choice>
        <process ref="OutgoingIdscpMessageParser"/>
    </route>

</routes>
